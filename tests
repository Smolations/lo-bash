#!/bin/bash

if [ ! -d "./shell_spec" ]; then
  SHELLSPEC_VERSION="0.28.1"
  echo "Installing shellspec v${SHELLSPEC_VERSION}..."
  git clone https://github.com/shellspec/shellspec.git --branch $SHELLSPEC_VERSION shell_spec
  ln -s ./shell_spec/shellspec ./
fi

# source SOURCEME

./shell_spec/shellspec

exit 0

function h1 {
  echo -n "`printf '\n ---==:  %-15s  ' $1`"
}
function pass {
  echo -n '.'
}
function fail {
  local txt='X'
  [[ -z "$@" ]] || txt+="[$@]"
  echo -n "$txt"
}
function skip {
  echo -n 'S'
}
export -f pass fail skip h1


# source foo.sh


# maybe need an _.executeAll?
time _sourceAll -r test/
# _sourceAll -r test/_
# _sourceAll -r test/array
# _sourceAll -r test/date
# _sourceAll -r test/cuz
# _sourceAll -r test/lang
# _sourceAll -r test/math
# _sourceAll -r test/number
# _sourceAll -r test/string
# _sourceAll -r test/utility
# echo "-> $?"
echo
